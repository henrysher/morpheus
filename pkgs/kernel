url=$mirror/kernel.tar.gz
version=3.10.32

fetch() {
	wget -c $url -O src/kernel.tar.gz
}

unpack() {
	cd src
	[ -d linux-$version ] || tar xzf kernel.tar.gz
	cd -
}

build() {
	cd src/linux-$version
	cp $top/stuff/kernel-config .config
	make menuconfig
	make bzImage -j$nprocs || return 1
	cd -
}

install() {
	cd src/linux-$version
	cp arch/x86/boot/bzImage "$root/boot"
	cp .config "$root/boot/bzImage.config"
	cp System.map "$root/boot"
	cd -
}
