url=$mirror/kernel.tar.gz
version=3.10.12

fetch() {
	wget -c $url -O src/kernel.tar.gz
}

unpack() {
	pushd src
	[ -d linux-$version ] || tar xzf kernel.tar.gz
	popd
}

build() {
	pushd src/linux-$version
	cp $top/stuff/kernel-config .config
	make menuconfig
	make bzImage -j$nprocs || return 1
	popd
}

install() {
	pushd src/linux-$version
	cp arch/x86/boot/bzImage $root/boot
	cp .config $root/boot/bzImage.config
	cp System.map $root/boot
	popd
}
