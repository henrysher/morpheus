url=git://git.2f30.org/sinit

fetch() {
	[ -d src/sinit ] || git clone $url src/sinit
}

build() {
	pushd src/sinit
	make clean
	make -j$nprocs CC=x86_64-linux-musl-gcc LDFLAGS=-static || return 1
	popd
}

install() {
	pushd src/sinit
	make PREFIX=$root install
	popd
	pushd $root
	ln -sf /bin/sinit init
	popd
}
