url=$mirror/ncurses.tar.gz

fetch() {
	wget -c $url -O src/ncurses.tar.gz
}

unpack() {
	pushd src
	[ -d ncurses-5.9 ] || tar xzf ncurses.tar.gz
	popd
}

build() {
	pushd src/ncurses-5.9
	wget -c $mirror/ncurses-fallback.c -O ncurses/fallback.c
	CC=musl-gcc ./configure --prefix=$top/cross --without-tests \
		--with-normal --enable-sigwinch --disable-nls --without-dlsym \
		--without-cxx-binding --with-fallbacks="vt100"
	make CC=musl-gcc -j$nprocs
	popd
}

install() {
	pushd src/ncurses-5.9
	make install
	popd
}
