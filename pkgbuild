#!/bin/sh
#
# Simple package build script.
# For example to build the kernel do: ./pkgbuild kernel
#
# Please note that if the package has already been unpacked in src/
# then it will not be unpacked again.  This is to make it easy
# to build new packages by first hacking src/<pkg> until it can be
# successfully compiled.  If you want to force unpacking of the package
# simply rm the unpacked directory.  Similarly if you want to force
# re-downloading of the package, simply rm the packed version as well.

umask 022

if test -z "$1"; then
	echo usage: $0 pkg... 1>&2
	exit 1
fi

. ./prepare-env

if test "$(uname -m)" != "$arch"; then
	echo You need an $arch host to build morpheus 1>&2
	exit 1
fi

. ./prepare-root
mkdir -p src

while [ $# -gt 0 ]; do
	./build "pkgs/$1"
	shift
done
